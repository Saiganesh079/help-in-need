<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Report Need</title>

  <!-- Inline CSS (single-file style) -->
  <style>
    /* styles.css - embedded */
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: "Segoe UI", Roboto, Arial, sans-serif;
      background: linear-gradient(180deg,#f7f9fc 0%, #eef2f7 100%);
      color: #222;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
    }
    header {
      background: #2d89ef;
      color: #fff;
      padding: 1rem;
      display:flex;
      justify-content:space-between;
      align-items:center;
    }
    header h1 { font-size: 1.05rem; font-weight:700; letter-spacing:0.2px; }
    header nav a { color:#fff; text-decoration:none; font-weight:600; }
    header nav a:hover { text-decoration:underline; opacity:0.95; }

    main {
      max-width: 760px;
      width: 94%;
      margin: 1.25rem auto;
      background: #fff;
      border-radius: 14px;
      padding: 1.25rem;
      box-shadow: 0 10px 30px rgba(16,24,40,0.08);
    }

    .note { color:#666; font-size:0.92rem; margin-bottom: 0.9rem; }

    form { display:flex; flex-direction:column; gap:0.85rem; }
    label { font-weight:600; font-size:0.95rem; display:flex; flex-direction:column; gap: 0.45rem; }
    select, textarea, input[type="text"], button {
      padding: 0.65rem;
      border-radius: 10px;
      border: 1px solid #e6ecf3;
      font-size: 1rem;
      outline: none;
      background: #fff;
    }
    select:focus, textarea:focus, input:focus { border-color: #2d89ef; box-shadow: 0 0 0 4px rgba(45,137,239,0.06); }

    .camera { display:flex; flex-direction:column; gap:0.6rem; align-items:center; }
    #video, #preview {
      width:100%;
      max-height:420px;
      border-radius:12px;
      background: #000;
      object-fit:cover;
      border: 1px solid rgba(3,10,18,0.04);
      box-shadow: 0 6px 18px rgba(16,24,40,0.06);
    }
    .hidden { display:none; }

    .camera-controls {
      display:flex;
      gap:0.6rem;
      width:100%;
      justify-content:center;
      margin-top:0.6rem;
    }
    #snap {
      background: linear-gradient(180deg,#2d89ef,#1f6fd0);
      color: #fff;
      border: none;
      padding: 0.6rem 1rem;
      border-radius: 10px;
      cursor: pointer;
      font-weight:700;
      box-shadow: 0 6px 14px rgba(31,111,208,0.18);
      transition: transform 120ms ease, box-shadow 120ms ease;
    }
    #snap:active { transform: translateY(1px) scale(0.997); }
    #snap:hover { box-shadow: 0 10px 26px rgba(31,111,208,0.22); }

    .muted {
      color:#667085; font-weight:600; padding:0.55rem 0.8rem; border-radius:10px; border:1px solid #eef2f6; background:#fbfdff;
    }

    .row { display:flex; gap:0.6rem; flex-wrap:wrap; align-items:center; }

    .checkbox-inline {
      display:flex; align-items:center; gap:0.5rem; font-weight:600; color:#333;
    }
    input[type="checkbox"] { transform:scale(1.15); }

    .submit-row { display:flex; justify-content:space-between; align-items:center; gap:1rem; margin-top:0.4rem; }
    button[type="submit"] {
      background: linear-gradient(180deg,#28a745,#218838);
      color:#fff; border:none; padding:0.9rem 1.1rem; border-radius:12px; font-weight:800; cursor:pointer;
      box-shadow: 0 10px 22px rgba(33,136,56,0.14);
    }
    button[type="submit"]:active { transform: translateY(1px); }
    button[type="submit"]:hover { opacity:0.98; }

    #status { font-size:0.95rem; color:#374151; margin-top:0.3rem; min-height:1.2em; }

    footer { margin: 2rem auto 4rem; text-align:center; color:#8892a6; font-size:0.9rem; }

    @media(min-width:980px) {
      main { width: 760px; padding: 1.6rem; }
    }
  </style>

  <!-- Supabase JS (global `supabase`) -->
  <script defer src="https://unpkg.com/@supabase/supabase-js@2"></script>

  <!-- Your config must be loaded before app.js/report.js -->
  <script defer src="config.js"></script>

  <!-- app.js (shared helpers) -->
  <script defer type="module" src="app.js"></script>

  <!-- report.js (submit flow) -->
  <script defer type="module" src="report.js"></script>
</head>
<body>
  <header>
    <h1>Report Someone in Need</h1>
    <nav><a href="map.html">View Map</a></nav>
  </header>

  <main>
    <p class="note">Please ensure dignity & consent. Avoid identifiable details unless necessary. By submitting, you confirm you have observed this situation and have permission where required.</p>

    <form id="reportForm" autocomplete="off" novalidate>
      <label>
        Category
        <select name="category" required>
          <option value="hunger">Hunger</option>
          <option value="education">Education</option>
          <option value="medical">Medical</option>
          <option value="shelter">Shelter</option>
          <option value="other">Other</option>
        </select>
      </label>

      <label>
        Description
        <textarea name="description" rows="3" placeholder="Short context (optional)"></textarea>
      </label>

      <div class="camera" aria-live="polite">
        <video id="video" autoplay playsinline muted></video>
        <canvas id="canvas" class="hidden"></canvas>
        <img id="preview" alt="photo preview" class="hidden" />
        <div class="camera-controls">
          <button id="snap" type="button">Take Photo</button>
          <span class="muted">Tip: use back camera for better results</span>
        </div>
      </div>

      <div class="row">
        <label class="checkbox-inline"><input type="checkbox" id="blurFaces" /> Blur faces (privacy)</label>
      </div>

      <div class="submit-row">
        <button type="submit">Submit Report</button>
        <div id="status" role="status" aria-live="polite"></div>
      </div>
    </form>
  </main>

  <footer>Help-in-Need â€¢ Respect & dignity first</footer>
</body>
</html>
